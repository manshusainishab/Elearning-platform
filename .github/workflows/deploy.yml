name: deploy
on:
    push:
        tags:
            - 'v*.*.*'
    workflow_dispatch: 
jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
                  - name: SSH into EC2 (dry run)
                    uses: appleboy/ssh-action@v1.2.5
                    with:
                        host: ${{ secrets.EC2_HOST }}
                        username: ${{ secrets.EC2_USER }}
                        key: ${{ secrets.EC2_SSH_KEY }}
                        port: ${{ secrets.EC2_SSH_PORT }}
                        debug: true
                        script: |
                            eho "REMOTE USER:"
                            whoami
                            echo "HOSTNAME:"
                            hostname
                            eccho "DOCKER CONTAINERS:"
                            docker ps
